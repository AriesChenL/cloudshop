# cloudshop开发文档

## 1. 安装所需依赖

>   本项目采用 vue2 + vant2 开发，具体所需依赖如下：

~~~json
"dependencies": {
    "@vant/area-data": "^1.3.2",
    "better-scroll": "^2.5.0",
    "core-js": "^3.8.3",
    "less-loader": "^11.1.0",
    "mint-ui": "^2.2.13",
    "vant": "^2.12.53",
    "vue": "^2.6.14",
    "vue-router": "^3.6.5",
    "vuex": "^3.6.2"
  },
  "devDependencies": {
    "@babel/core": "^7.12.16",
    "@babel/eslint-parser": "^7.12.16",
    "@vue/cli-plugin-babel": "~5.0.0",
    "@vue/cli-plugin-eslint": "~5.0.0",
    "@vue/cli-service": "~5.0.0",
    "eslint": "^7.32.0",
    "eslint-plugin-vue": "^8.0.3",
    "vue-template-compiler": "^2.6.14"
  },
~~~

>   main.js 引入插件
>
>   ```js
>   import Vue from 'vue'
>   import App from './App.vue'
>   import router from './router.js'
>   import store from "@/store";
>   import auth from './auth.js'
>   import Vant from 'vant';
>   import 'vant/lib/index.css';
>   
>   Vue.use(Vant);
>   Vue.use(auth)
>   
>   Vue.config.productionTip = false
>   
>   new Vue({
>       router,
>       store,
>       render: h => h(App),
>   }).$mount('#app')
>   ```

>   auth.js 用于数据本地持久化
>
>   ```js
>   var auth = {
>       getAuthorization() {
>           return localStorage.getItem('usernme');
>       },
>       setAuthorization(username) {
>           localStorage.setItem('usernme', username);
>       }
>   }
>   export default {
>       install: function (vue) {
>           vue.prototype.$auth = auth
>       }
>   }
>   ```

## 2. 开发App框架

### 2.1 tabbar 导航组件

```vue
<template>
  <div>
    <van-tabbar v-model="active">
      <van-tabbar-item icon="home-o" :to="{name:'home'}">首页</van-tabbar-item>
      <van-tabbar-item icon="bag-o" :to="{name: 'category'}">分类</van-tabbar-item>
      <van-tabbar-item icon="shopping-cart-o" :badge="$store.getters['shopcart/getCarCountNum']" :to="{name: 'shopcart'}">购物车</van-tabbar-item>
      <van-tabbar-item icon="contact" :to="{name: 'user'}">我的</van-tabbar-item>
    </van-tabbar>
  </div>
</template>

<script>

export default {
  name: "tabbar",
  data() {
    return {
      active: 0
    }
  },
  watch:{
    '$route.path'(newVal) {
      if (newVal.indexOf('home') !== -1){
        this.active = 0
      }else if (newVal.indexOf('category') !== -1){
        this.active = 1
      }else if (newVal.indexOf('shopcart') !== -1){
        this.active = 2
      }else if (newVal.indexOf('user') !== -1){
        this.active = 3
      }
    }

  }
}
</script>

<style scoped lang='less'>
div{
  background-color: #f6f4ef;
}
</style>
```

### 2.2 引入vant轮播图组件

```vue
<van-nav-bar class="nav_bar"
    :title="$route.meta.title"
    @click-left="goBack"
>
  <span slot="left" v-show="showBack"><van-icon name="arrow-left" />返回</span>
</van-nav-bar>
```



### 2.3 完整App.vue代码

```vue
<template>
  <div>
    <van-nav-bar class="nav_bar"
        :title="$route.meta.title"
        @click-left="goBack"
    >
      <span slot="left" v-show="showBack"><van-icon name="arrow-left" />返回</span>
    </van-nav-bar>

    <transition name="van-slide-left">
      <router-view>

      </router-view>
    </transition>

    <tabbar></tabbar>
  </div>
</template>

<script>
import tabbar from "@/components/tabbar";

export default {
  name: 'App',
  data() {
    return {
      showBack: false
    }
  },
  components: {
    tabbar,
  },
  created() {
    this.showBack = this.$route.path !== '/home'
  },
  watch: {
    '$route.path'(newVal) {
      this.showBack = newVal !== '/home'
    }
  },
  methods: {
    goBack() {
      this.$router.go(-1)
    },
  },
}
</script>

<style lang="less" scoped>
span{
  color: #39a9ed;
  font-size: 15px;
}

.nav_bar{
  background-color: #f6f4ef;
}

</style>
```

## 3. home 页面开发

在home组件中引入swiper轮播图组件和九宫格组件

```vue
<template>
  <div>
    <swiper></swiper>
    <van-grid clickable :column-num="2">
      <van-grid-item icon="coupon-o" text="新闻资讯" :to="{ name: 'news_list' }" />
      <van-grid-item icon="share" text="图片分享" :to="{ name: 'photo_list' }" />
      <van-grid-item icon="shop-o" text="商品购买" :to="{ name: 'category' }" />
      <van-grid-item icon="home-o" text="开发中..." url="/" />
      <van-grid-item icon="home-o" text="开发中..." url="/" />
      <van-grid-item icon="home-o" text="开发中..." url="/" />
    </van-grid>
  </div>
</template>

<script>
import swiper from "@/components/swiper";

export default {
  name: "Home",
  components: {swiper}
}
</script>

<style scoped lang='less'>
</style>
```

## 4. user 页面开发

>   完整的user.vue
>
>   ```vue
>   <template>
>     <!-- 已登录 -->
>     <div v-if="isLogin">
>       <div class="member">
>         <div class="header-con">
>           <div class="user-info">
>             <div class="avatar-con">
>               <div class="avatar">
>                 <img src="../assets/images/avatar_default.png" class="image-info">
>               </div>
>             </div>
>             <div class="person-con">
>               <span>{{ username }}</span>
>             </div>
>           </div>
>         </div>
>       </div>
>       <ul class="mui-table-view mui-table-view-chevron">
>         <li class="mui-table-view-cell mui-media">
>           <div class="mui-navigate-right">
>             <van-cell icon="passed" title="我的订单" is-link :to="{ name: 'order_list' }"/>
>           </div>
>         </li>
>         <li class="mui-table-view-cell mui-media">
>           <div class="mui-navigate-right">
>             <van-cell icon="location-o" title="收货地址" is-link :to="{ name: 'address' }"/>
>           </div>
>         </li>
>         <li class="pan-logout">
>           <van-button round type="info" @click="logout" size="large"
>                       color="linear-gradient(100deg, #f6f4ef, #28a2ff, #f6f4ef)">退出登录
>           </van-button>
>         </li>
>       </ul>
>     </div>
>     <!-- 未登录 -->
>     <div v-else>
>       <div class="member">
>         <div class="header-con">
>           <router-link :to="{ name: 'login' }" class="mui-navigate-right">
>             <div class="user-info">
>               <!-- 用户信息 -->
>               <div class="avatar-con">
>                 <div class="avatar">
>                   <img src="../assets/images/avatar_default.png" class="image-info">
>                 </div>
>               </div>
>               <div class="person-con">
>                 <span>登录 / 注册</span>
>               </div>
>             </div>
>           </router-link>
>         </div>
>       </div>
>     </div>
>   </template>
>   
>   <script>
>   import {Dialog} from 'vant';
>   
>   export default {
>     name: "User",
>     data(){
>       return{
>         username: ''
>       }
>     },
>     created() {
>       this.username = this.$store.getters["user/getUsername"]
>     },
>     computed: {
>       isLogin(){
>         return this.$store.getters["user/isLogin"]
>       },
>     },
>     methods: {
>       logout() {
>         this.$store.commit('user/logout')
>         Dialog({message: '退出成功'});
>       },
>     }
>   }
>   </script>
>   
>   <style scoped lang='less'>
>   
>   .user-info {
>     border-radius: 20px;
>   }
>   
>   
>   .pan-logout {
>     padding-top: 20px;
>   }
>   
>   .mui-table-view .mui-media, .mui-table-view .mui-media-body {
>     line-height: 42px;
>   }
>   
>   .mui-table-view-cell:after {
>     left: 0px;
>   }
>   
>   .member {
>     margin-bottom: 15px;
>   
>     .header-con {
>       padding: 10px;
>       background-color: #fff;
>   
>       .user-info {
>         position: relative;
>         overflow: hidden;
>         width: 100%;
>         height: 120px;
>         background: linear-gradient(90deg, #28a2ff, #f6f4ef);
>         box-shadow: 0 0.1rem 0.25rem #f8e3c6;
>   
>         .avatar-con {
>           position: absolute;
>           left: 15px;
>           top: 50%;
>           transform: translateY(-50%);
>   
>           .avatar {
>             width: 60px;
>             height: 60px;
>             overflow: hidden;
>             box-shadow: 0 2px 10px rgba(0, 0, 0, 15);
>             border: 1px solid hsla(0, 0%, 100%, .4);
>             border-radius: 50% 50%;
>   
>             .image-info {
>               width: 100%;
>               height: 100%;
>             }
>           }
>         }
>   
>         .person-con {
>           position: absolute;
>           left: 90px;
>           top: 50%;
>           transform: translateY(-50%);
>           color: #fff;
>         }
>       }
>     }
>   }
>   </style>
>   ```



## 5. category 页面开发

>   完整的category .vue
>
>   ```
>   <template>
>     <div>
>       <div class="menu">
>         <div class="menu-left">
>           <ul>
>             <li class="menu-item" v-for="(menu,index) in menus" :key="index" :class="{current: index === currentIndex}"
>                 @click="clickList(index)" ref="menuList">
>               <p class="text">{{ menu.name }}</p>
>             </li>
>           </ul>
>         </div>
>   
>         <div class="menu-right" ref="itemList">
>           <ul>
>             <li class="cate" v-for="(menu, index1) in menus" :key="index1">
>               <h4 class="cate-title">{{ menu.name }}</h4>
>               <ul class="cate-item">
>                 <li v-for="(item, index2) in menu.sub" :key="index2">
>                   <router-link class="cate-item-wrapper" :to="{name: 'goods_list'}">
>                     <div class="cate-item-img">
>                       <img :src="item.image" alt/>
>                     </div>
>                     <span>{{ item.name }}</span>
>                   </router-link>
>                 </li>
>               </ul>
>             </li>
>             <li class="cate-bottom"></li>
>           </ul>
>         </div>
>       </div>
>     </div>
>   </template>
>   
>   <script>
>   import BScroll from 'better-scroll'
>   
>   export default {
>     data() {
>       return {
>         menus: [],
>         rightLiTops: [],
>         scrollY: 0        // 记住右菜单的滚动距离
>       }
>     },
>     created() {
>       this.menus = [{"id": 1,"name": "手机数码","pid": 0,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/7f78f93a82e5dbd6eb1ae21c3061e32f.jpg","sub": [{"id": 2,"name": "小米","pid": 1,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/f2efb0888bef8fd157f2f1c8755e6f80.png","sub": []},{"id": 3,"name": "华为","pid": 1,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/953cfabd3bf5c3a482bbe9ac66c8fa21.jpg","sub": []},{"id": 4,"name": "iPhone","pid": 1,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/b87144fdb530687b9558d921e83d48ab.jpg","sub": []},{"id": 5,"name": "vivo","pid": 1,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/670b2f18751fd29970efe26398391274.png","sub": []},{"id": 6,"name": "OPPO","pid": 1,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/a0e3ce31f804d56b14271a16dcbdc10b.png","sub": []},{"id": 7,"name": "魅族","pid": 1,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/6bbf72a71c1bcf6e443d14fefedd103f.jpg","sub": []},{"id": 8,"name": "三星","pid": 1,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/58bfad062b532a1d3c42099f819068cb.png","sub": []},{"id": 9,"name": "女性手机","pid": 1,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/9aeaf37dc32d926285f2fc3427de02df.jpg","sub": []}]},{"id": 10,"name": "家用电器","pid": 0,"image": "http://43.138.107.193:8080/static/api/goods/img/noimg.png","sub": [{"id": 11,"name": "电水壶/热水瓶","pid": 10,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/0a1e8b506b4bbe1a73f16d70b2eece7e.jpg","sub": []},{"id": 12,"name": "电压力锅","pid": 10,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/aa69a3bcffcc52b0e365ca65243ec835.jpg","sub": []},{"id": 13,"name": "电饭煲","pid": 10,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/f1c0cf688bcb91fe32b5c2a7906e6332.jpg","sub": []},{"id": 14,"name": "电磁炉","pid": 10,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/253a5d721e376ecf3b1a5a06baa7a317.jpg","sub": []},{"id": 15,"name": "微波炉","pid": 10,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/890e9fbcac4cd5ff338fea5dc2596540.jpg","sub": []},{"id": 16,"name": "电饼铛","pid": 10,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/ccc6a23166e0a673309cb6759ef160b3.jpg","sub": []},{"id": 17,"name": "豆浆机","pid": 10,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/fd4ba9365e03c0976e8cf22f78a902c2.jpg","sub": []},{"id": 18,"name": "多用途锅","pid": 10,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/9b9f45fc1b08982f025cbe565c7ec008.jpg","sub": []}]},{"id": 19,"name": "电脑办公","pid": 0,"image": "http://43.138.107.193:8080/static/api/goods/img/noimg.png","sub": [{"id": 20,"name": "轻薄本","pid": 19,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/1ed760174279e3970e85217019c1edd0.png","sub": []},{"id": 21,"name": "游戏本","pid": 19,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/5e4130cc28927665799c3379c78a1713.png","sub": []},{"id": 22,"name": "机械键盘","pid": 19,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/e6c8697469c56055223756e39c60542a.jpg","sub": []},{"id": 23,"name": "组装电脑","pid": 19,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/2544453b66d11ff24c626638dcb2565e.jpg","sub": []},{"id": 24,"name": "移动硬盘","pid": 19,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/4a1926d760dfa56abdbd4ce97813acc3.jpg","sub": []},{"id": 25,"name": "显卡","pid": 19,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/167b37c9ea36b8acc5ff9f1ff4a32f86.jpg","sub": []},{"id": 26,"name": "游戏台式机","pid": 19,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/c0fd9e8be4fdb13e72838d21ff22b011.jpg","sub": []},{"id": 27,"name": "家用打印机","pid": 19,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/d98333ee6fddf537ff755a0c90ab93b1.jpg","sub": []},{"id": 28,"name": "吃鸡装备","pid": 19,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/9b042c5255371159de8d62216564a095.jpg","sub": []}]},{"id": 29,"name": "汽车用品","pid": 0,"image": "http://43.138.107.193:8080/static/api/goods/img/noimg.png","sub": [{"id": 30,"name": "机油","pid": 29,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/c90ae170808eaa73e258950be16fbcf4.jpg","sub": []},{"id": 31,"name": "汽车坐垫","pid": 29,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/57f65d64ef5df464e904f37f0141bd69.jpg","sub": []},{"id": 32,"name": "洗车水枪","pid": 29,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/d6b17ebab487aefed848e43f7c754f02.jpg","sub": []},{"id": 33,"name": "行车记录仪","pid": 29,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/b808e009ce547e739dad93bf6dbb2f24.jpg","sub": []},{"id": 34,"name": "轮胎","pid": 29,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/b44b23d989fbf161afa93b8ac3e00a82.jpg","sub": []},{"id": 35,"name": "应急救援","pid": 29,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/b36db7438c1ed9bb962e944688f9fc88.png","sub": []},{"id": 36,"name": "香水","pid": 29,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/b861d4d32236610d7c477c8a0a4bbcb7.jpg","sub": []},{"id": 37,"name": "功能小件","pid": 29,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/5133f9296d5bda3abec8403a3cf6c35e.jpg","sub": []},{"id": 38,"name": "挂件","pid": 29,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/84dbfe924450cd313fe24e15512ba379.jpg","sub": []}]},{"id": 39,"name": "男装","pid": 0,"image": "http://43.138.107.193:8080/static/api/goods/img/noimg.png","sub": [{"id": 40,"name": "夹克","pid": 39,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/d73ec1fab63babbfb39ce44ae35b96c8.jpg","sub": []},{"id": 41,"name": "T恤","pid": 39,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/73c491573c9d3d3d8327704733a71207.jpg","sub": []},{"id": 42,"name": "针织衫","pid": 39,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/d913b18c3d17c1d99486d51435fc3982.jpg","sub": []},{"id": 43,"name": "衬衫","pid": 39,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/aac1ab3e9531db0c9e53d636ccb1125a.jpg","sub": []},{"id": 44,"name": "卫衣","pid": 39,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/f3d61ead06fffccac07c6b13f521a625.jpg","sub": []},{"id": 45,"name": "风衣","pid": 39,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/e6d2db57b8d3c322e8ea93a96702c65e.jpg","sub": []},{"id": 46,"name": "牛仔裤","pid": 39,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/e32f9556f75d5122852021981cb4b621.jpg","sub": []},{"id": 47,"name": "休闲裤","pid": 39,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/5a71d7061e49ad91d7089de45d610778.jpg","sub": []},{"id": 48,"name": "自营男装","pid": 39,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/e47ac280c18965c85a8bcdeb00065257.jpg","sub": []}]},{"id": 49,"name": "女装","pid": 0,"image": "http://43.138.107.193:8080/static/api/goods/img/noimg.png","sub": [{"id": 50,"name": "早春新品","pid": 49,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/1d481ed906b6237e09225babfba7914d.jpg","sub": []},{"id": 51,"name": "连衣裙","pid": 49,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/faddc38fbb14032e8bbad6508c2bf367.jpg","sub": []},{"id": 52,"name": "衬衫","pid": 49,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/cd4de65c042eeb3454fd3f296e630991.jpg","sub": []},{"id": 53,"name": "T恤","pid": 49,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/2cf6814d0c79abb994942edf402e2f60.jpg","sub": []},{"id": 54,"name": "牛仔裤","pid": 49,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/10b01991bf0ece09284ac70730200ec7.jpg","sub": []},{"id": 55,"name": "卫衣","pid": 49,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/b7fc13f5beb1709b643c912913c85bea.jpg","sub": []},{"id": 56,"name": "针织衫","pid": 49,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/eebbe04d1504c918f9117ebe21dac34f.jpg","sub": []},{"id": 57,"name": "牛仔外套","pid": 49,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/7e42c687e645a4c93fbfb5b373029266.jpg","sub": []},{"id": 58,"name": "自营女装","pid": 49,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/9d0e515e86086a29c3d8390d5cb93252.jpg","sub": []}]},{"id": 59,"name": "钟表珠宝","pid": 0,"image": "http://43.138.107.193:8080/static/api/goods/img/noimg.png","sub": [{"id": 60,"name": "瑞表","pid": 59,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/518eef9cb854a3cd4cd348882fab1568.jpg","sub": []},{"id": 61,"name": "国表","pid": 59,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/48a2a5afdebab0e4510349e2fd0f09b9.jpg","sub": []},{"id": 62,"name": "德表","pid": 59,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/cc1749b9554b14692293444bbd0d4bb8.jpg","sub": []},{"id": 63,"name": "日韩表","pid": 59,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/02ce848b272a1d07a6f254a844e56db8.jpg","sub": []},{"id": 64,"name": "儿童手表","pid": 59,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/610569bf2fb1e202c2608a7641ba0643.jpg","sub": []},{"id": 65,"name": "欧美表","pid": 59,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/75966bad4dd9708e1301650b03113c16.jpg","sub": []}]},{"id": 66,"name": "内衣配饰","pid": 0,"image": "http://43.138.107.193:8080/static/api/goods/img/noimg.png","sub": [{"id": 67,"name": "内衣馆","pid": 66,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/b10cb30ca7e99b98fbe11f700a1042db.jpg","sub": []},{"id": 68,"name": "大牌文胸","pid": 66,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/66ea89f35f16bb417f23aed193145c5e.jpg","sub": []},{"id": 69,"name": "自营内衣","pid": 66,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/f190312466ce914bafa0b582e8c98831.jpg","sub": []},{"id": 70,"name": "内衣爆款","pid": 66,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/02bda63c80a27a00d73e11ae2859cd5e.jpg","sub": []},{"id": 71,"name": "女士围巾/披肩","pid": 66,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/050c899cdf899d549b14abd958c02a04.jpg","sub": []},{"id": 72,"name": "配饰馆","pid": 66,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/fd7c742fca0ad155c69157dac9fd9bd5.jpg","sub": []}]},{"id": 73,"name": "箱包手袋","pid": 0,"image": "http://43.138.107.193:8080/static/api/goods/img/noimg.png","sub": [{"id": 74,"name": "拉杆箱","pid": 73,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/d8ad8e6f509a6230fb9dfd8043a1cb61.jpg","sub": []},{"id": 75,"name": "时尚男包","pid": 73,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/9486f8909cf9088b1a89bebc722b1ca2.jpg","sub": []},{"id": 76,"name": "男士腰带","pid": 73,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/450444484bbf37c728d91ec4997c8d80.jpg","sub": []},{"id": 77,"name": "男包上新","pid": 73,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/7f78f93a82e5dbd6eb1ae21c3061e32f.jpg","sub": []},{"id": 78,"name": "自营女包","pid": 73,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/52d0c6bd9d566da302e5e6b7f882f543.jpg","sub": []},{"id": 79,"name": "新款双肩包","pid": 73,"image": "http://43.138.107.193:8080/static/uploads/goods/category_image/2019/05/15/12fdd667b2e683519f6720ff57753410.jpg","sub": []}]}]
>     },
>     watch: {
>       menus() {
>         // $nextTick用来在下次DOM更新循环结束之后执行延迟回调
>         this.$nextTick(() => {
>           this._initBScroll()      // 初始化better-scroll
>           this._initRightHeight()  // 初始化右边菜单的高度
>         })
>       }
>     },
>     computed: {
>       currentIndex() {
>         // 当 scrollY 发生改变时，修改左菜单的激活项
>         const {scrollY, rightLiTops} = this
>         // 从右菜单中查找元素，返回元素索引
>         return rightLiTops.findIndex((top, index) => {
>           if (index === rightLiTops.length - 2) {
>             return true
>           }
>           if (scrollY >= top && scrollY < rightLiTops[index + 1]) {
>             this._initLeftScroll(index)
>             return true
>           }
>         })
>       }
>     },
>     methods: {
>       // 单击左菜单中的某一项后，将右菜单切换到对应项下面
>       clickList(index) {
>         this.scrollY = this.rightLiTops[index]
>         this.rightBscroll.scrollTo(0, -this.scrollY)
>       },
>       // 初始化better-scroll
>       _initBScroll() {
>         this.leftBscroll = new BScroll('.menu-left', {
>           click: true,
>           mouseWheel: true
>         })
>         this.rightBscroll = new BScroll('.menu-right', {
>           click: true,
>           mouseWheel: true,
>           probeType: 3  // 实时派发 scroll 事件
>         })
>         this.rightBscroll.on('scroll', (pos) => {
>           this.scrollY = Math.abs(pos.y)
>         })
>       },
>       // 初始化右边菜单的高度
>       _initRightHeight() {
>         let itemArray = []
>         let top = 0
>         itemArray.push(top)
>         let allList = this.$refs.itemList.getElementsByClassName('cate')
>         // 将 allList 转换为普通数组进行遍历，记录每个元素的高度
>         Array.prototype.slice.call(allList).forEach(li => {
>           top += li.clientHeight
>           itemArray.push(top)
>         })
>         let bottom = this.$refs.itemList.getElementsByClassName('cate-bottom')[0]
>         bottom.style.height = this.$refs.itemList.clientHeight / 1.2 + 'px'
>         this.rightLiTops = itemArray
>       },
>       // 右菜单滚动时，左菜单联动
>       _initLeftScroll(index) {
>         let menu = this.$refs.menuList
>         let el = menu[index]
>         // scrollToElement(el, time, offsetX, offsetY, easing)
>         this.leftBscroll.scrollToElement(el, 300, 0, -100)
>       }
>     }
>   }
>   </script>
>   
>   <style lang="less" scoped>
>   ul {
>     margin: 0;
>     padding: 0;
>   }
>   
>   li {
>     list-style: none;
>   }
>   
>   .menu {
>     display: flex;
>     position: absolute;
>     text-align: center;
>     top: 40px;
>     bottom: 50px;
>     width: 100%;
>     overflow: hidden;
>   
>     .menu-left {
>       flex: 0 0 80px;
>       width: 80px;
>       background: #c5ddf6;
>   
>       .menu-item {
>         height: 54px;
>         width: 100%;
>   
>         .text {
>           width: 100%;
>           line-height: 54px;
>           margin-bottom: 0;
>         }
>       }
>   
>       .current {
>         width: 100%;
>         background: #fff;
>   
>         .text {
>           color: #3bafd2;
>           font-weight: 700;
>         }
>       }
>     }
>   
>     .menu-right {
>       flex: 1;
>       background: #fff;
>   
>       .cate {
>         height: 100%;
>   
>         .cate-title {
>           margin: 0;
>           text-align: left;
>           font-size: 14px;
>           color: #333;
>           font-weight: bold;
>           padding: 10px;
>         }
>   
>         .cate-item {
>           padding: 7px 10px 10px;
>           display: flex;
>           overflow: hidden;
>           flex-flow: row wrap;
>   
>           li {
>             width: 33.3%;
>   
>             .cate-item-wrapper {
>               .cate-item-img {
>                 width: 100%;
>   
>                 img {
>                   width: 70px;
>                   height: 70px;
>                 }
>               }
>   
>               span {
>                 display: inline-block;
>                 font-size: 14px;
>                 color: #333;
>               }
>             }
>           }
>         }
>       }
>     }
>   }
>   </style>
>   ```

## 6. shopcart 页面开发

>   完整的shopcart.vue
>
>   ```
>   <template>
>     <div v-if="isZone" class="zone-tip"><div>您的购物车空空如也~~</div></div>
>     <div class="box" v-else>
>       <div class="item">
>         <van-card
>             :num="num"
>             :price="14999.9"
>             desc="19代i9"
>             title="高性能笔记本"
>             thumb="https://img01.yzcdn.cn/vant/ipad.jpeg"
>         >
>           <template #tags>
>             <van-tag plain type="danger">打折</van-tag>
>             <van-tag plain type="danger">优惠</van-tag>
>           </template>
>           <template #footer>
>             <van-button size="mini" @click="reduceCount">-</van-button>
>             <van-button size="mini" @click="addCount">+</van-button>
>           </template>
>         </van-card>
>       </div>
>       <div class="foot">
>         <span>已勾选{{ num }}件，共计<i>{{ num * 14999.9 }}</i>元。</span>
>         <button @click="goPay">去结算</button>
>       </div>
>     </div>
>   </template>
>   
>   <script>
>   export default {
>     name: "Shopcart",
>     data() {
>       return {
>         goodslist: [],
>         isZone: false
>       }
>     },
>     computed: {
>       num() {
>         return this.$store.getters["shopcart/getCarCountNum"]
>       }
>     },
>     mounted() {
>       if (this.$store.getters["shopcart/getCarCountNum"]===0){
>         this.isZone = true
>       }
>     },
>   
>     methods: {
>       goPay() {
>         this.$router.push({name: 'order_create', params:{value: this.num}})
>       },
>       addCount() {
>         this.$store.commit('shopcart/addCarCountNum')
>       },
>       reduceCount() {
>         if (this.num !== 0) {
>           this.$store.commit('shopcart/reduceCarCountNum')
>         }
>       }
>     }
>   
>   
>   }
>   </script>
>   
>   <style scoped lang='less'>
>   :deep(.van-card__footer) {
>     .van-button--mini {
>       width: 30px;
>     }
>   }
>   
>   .zone-tip{
>     margin: 100px 100px;
>   }
>   
>   .box {
>     padding-bottom: 50px;
>   
>     .item {
>       position: relative;
>   
>       input {
>         position: absolute;
>         left: 10px;
>         z-index: 2;
>       }
>     }
>   
>     .foot {
>       margin-bottom: 20px;
>       margin-top: 20px;
>   
>       span {
>         color: darkgray;
>         padding: 20px;
>   
>         i {
>           color: red;
>         }
>       }
>   
>       button {
>         width: 100px;
>         height: 30px;
>         outline: none;
>         border: 1px #3bafd2 solid;
>         border-radius: 10px
>       }
>     }
>   }
>   </style>
>   ```

## 7. 图片列表功能开发

>   图片列表页
>
>   ```vue
>   <template>
>     <div class="box">
>       <van-tabs v-model="active" color="#a8afff">
>         <van-tab title="全部图片">
>           <div class="one-photo-grid" v-for="item in 21" @click="goDetail">
>             <div class="detail">
>               <p>万象双环，化繁为简，呈现纯粹致美的几何秩序感，所到之处，备受瞩目。亦如慧眼明眸，洞悉万象，开启影像新生。</p>
>             </div>
>           </div>
>         </van-tab>
>         <van-tab title="手机图片">
>           <div class="one-photo-grid" v-for="item in 21" @click="goDetail">
>             <div class="detail">
>               <p>万象双环，化繁为简，呈现纯粹致美的几何秩序感，所到之处，备受瞩目。亦如慧眼明眸，洞悉万象，开启影像新生。</p>
>             </div>
>           </div>
>         </van-tab>
>         <van-tab title="电脑图片">
>           <div class="one-photo-grid" v-for="item in 21" @click="goDetail">
>             <div class="detail">
>               <p>万象双环，化繁为简，呈现纯粹致美的几何秩序感，所到之处，备受瞩目。亦如慧眼明眸，洞悉万象，开启影像新生。</p>
>             </div>
>           </div>
>         </van-tab>
>         <van-tab title="键盘图片">
>           <div class="one-photo-grid" v-for="item in 21" @click="goDetail">
>             <div class="detail">
>               <p>万象双环，化繁为简，呈现纯粹致美的几何秩序感，所到之处，备受瞩目。亦如慧眼明眸，洞悉万象，开启影像新生。</p>
>             </div>
>           </div>
>         </van-tab>
>       </van-tabs>
>     </div>
>   </template>
>   
>   <script>
>   export default {
>     name: "PhotoList",
>     data() {
>       return {
>         active: 0,
>       };
>     },
>     methods:{
>       goDetail(){
>         this.$router.push({name: 'photo_show'})
>       }
>     }
>   }
>   </script>
>   
>   <style scoped lang='less'>
>   .box{
>     .one-photo-grid{
>       border: 1px black solid;
>       margin: 10px 20px 20px;
>       height: 300px;
>       position: relative;
>       background: url("http://43.138.107.193:83/huawei.png");
>       background-size: cover;
>   
>       .detail{
>         position: absolute;
>         bottom: 0;
>         height: 40%;
>         width: 100%;
>         background-color: #F4F2EEFF;
>         filter: opacity(60%);
>   
>         p{
>           font-size: 14px;
>           margin: 20px;
>         }
>       }
>     }
>   }
>   </style>
>   ```

## 8. 新闻列表功能开发

## 9. 完整router.js

```js
import Vue from 'vue'
import VueRouter from 'vue-router'
import Home from './pages/Home.vue'
import Category from './pages/Category.vue'
import Shopcart from './pages/Shopcart.vue'
import User from './pages/User.vue'
import Login from './pages/user/Login.vue'
import Register from './pages/user/Register.vue'
import GoodsList from './pages/goods/GoodsList.vue'
import GoodsInfo from './pages/goods/GoodsInfo.vue'
import Address from './pages/user/Address.vue'
import AddressEdit from './pages/user/AddressEdit.vue'
import OrderCreate from './pages/order/OrderCreate.vue'
import OrderList from './pages/order/OrderList.vue'
import OrderShow from './pages/order/OrderShow.vue'
import NewsList from './pages/news/NewsList.vue'
import NewsInfo from './pages/news/NewsInfo.vue'
import PhotoList from './pages/photo/PhotoList.vue'
import PhotoInfo from './pages/photo/PhotoInfo.vue'


Vue.use(VueRouter)


var router = new VueRouter({ // 创建路由实例对象router
    routes: [
        {path: '/', redirect: '/home', meta: {title: '首页'}},
        {path: '/home', component: Home, name: 'home', meta: {title: '首页'}},
        {path: '/category', component: Category, name: 'category', meta: {title: '分类'}},
        {path: '/shopcart', component: Shopcart, name: 'shopcart', meta: {title: '购物车'}},
        {path: '/user', component: User, name: 'user', meta: {title: '我的'}},
        {path: '/user/login', component: Login, name: 'login', meta: {title: '登录'}},
        {path: '/user/register', component: Register, name: 'register', meta: {title: '注册'}},
        {path: '/goodslist/', component: GoodsList, props: true, name: 'goods_list', meta: {title: '商品列表'}},
        {path: '/goodsinfo/:id', component: GoodsInfo, props: true, name: 'goods_info', meta: {title: '商品信息'}},
        {path: '/user/address', component: Address, name: 'address', meta: {title: '收货地址'}},
        {path: '/user/address/edit', component: AddressEdit, props: true, name: 'address_edit', meta: {title: '编辑收货地址'}},
        {path: '/order/create', component: OrderCreate, props: true, name: 'order_create', meta: {title: '下订单'}},
        {path: '/order/list', component: OrderList, name: 'order_list', meta: {title: '我的订单'}},
        {path: '/order/show/:id', component: OrderShow, props: true, name: 'order_show', meta: {title: '查看订单'}},
        {path: '/news/list', component: NewsList, name: 'news_list', meta: {title: '新闻资讯列表'}},
        {path: '/news/show', component: NewsInfo, props: true, name: 'news_show', meta: {title: '查看新闻资讯'}},
        {path: '/photo/list', component: PhotoList, name: 'photo_list', meta: {title: '图片分享列表'}},
        {path: '/photo/show', component: PhotoInfo, props: true, name: 'photo_show', meta: {title: '查看图片'}}
    ],
})

router.beforeEach((to, from, next) => {
    if (to.meta.title) {
        document.title = to.meta.title
    }
    next()
})

export default router
```